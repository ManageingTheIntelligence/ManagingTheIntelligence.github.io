
  <!DOCTYPE html>
  <html>
  <head>
      <title>MTI ROI Calculator</title>
      
      <style media="screen">
          body{
              margin: 0;
              padding: 0;
              text-align: center;
              font-family: sans-serif;
              background-image: linear-gradient(180deg,#ff6b6b, #5f27cd);
              min-height: 100vh;
          }
          div{
              width: 500px;
              position: absolute;
              top: 50%;
              left: 50%;
              background-color: #fff;
              transform: translate(-50%, -50%);
              padding: 20px;
              border-radius: 10px;
              box-shadow: 1px 1px 20px #ee5253;
          }
          h2{
              font-size: 30px;
              font-weight: 600;
          }
          .text{
              text-align: center;
              margin-left: 150px;
          }
          #w, #h{
              color: #222f3e;
              text-align: left;
              font-size: 20px;
              font-weight: 200;
              outline: none;
              border: none;
              background: none;
              border-bottom: 1px solid #341f97;
              width: 200px;
          }
              #w:focus, #h:focus{
                  border-bottom: 2px solid #341f97;
                  width: 300px;
                  transition: 0.5s;
              }
              #result{
                  color: #341f97;
              }
              
              #info{
                  font-size: 12px;
                  font-family: inherit;
              }
        </style>
  </head>
  <body>
      <h1>MTI ROI Calculator</h1>
      <h2>Please enter the electricity_bills without VAT</h2>
      <div id="results"></div>
      
      <script>
         let electricity_bills = [];
for (let i = 0; i < 12; i++) {
  let bill;
  do {
    bill = prompt(`Please enter electricity bill without VAT for month ${i+1}: Please enter a valid number`);
    if (bill === "") {
      if (i === 0) {
        // If the first value is empty, use the average of the next positive value and 0
        if (electricity_bills.filter(x => x).length > 0) {
          let next_val = electricity_bills.find(x => x);
          let average = next_val ;
          bill = average;
        } else {
          bill = 0;
        }
      } else {
        // Use the previous value to fill the missing value
        bill = electricity_bills[i-1];
      }
    }
  } while (!bill && bill !== 0);

  electricity_bills.push(parseFloat(bill));
}

  
          // Input number of rooms and investment price per room
          let num_rooms = parseInt(prompt("Enter number of rooms:"));
          let investment_price_per_room = parseFloat(prompt("Enter investment price per room:"));
  
          // Yearly subscription per year per room
          let subscription = parseFloat(prompt("Enter yearly software subscription per year per room:"));
  
          // Installation fee per room
          let installation = parseFloat(prompt("Enter installation fee per room:"));
  
          // Calculate HVAC consumption for each month
          let hvac_consumption = parseInt(prompt("Enter HVAC %:"));
  
          // Calculate investment amount
          let investment_amount = num_rooms * (investment_price_per_room + installation);
  
          // Calculate HVAC consumption for each month
          let HVAC_Consumption = [];
let missingIndices = [];

for (let i = 0; i < electricity_bills.length; i++) {
  if (electricity_bills[i]) {
    // calculate HVAC consumption using the actual bill
    HVAC_Consumption.push(parseFloat(hvac_consumption * electricity_bills[i] / 100));
  } else {
    // mark the index of the missing bill
    missingIndices.push(i);
  }
}

if (missingIndices.length > 0) {
  // interpolate the missing values based on the adjacent positive values
  for (let index of missingIndices) {
    let prevPositive = electricity_bills.slice(0, index).reverse().find(bill => bill);
    let nextPositive = electricity_bills.slice(index + 1).find(bill => bill);
    if (prevPositive && nextPositive) {
      let avg = (prevPositive + nextPositive) / 2;
      HVAC_Consumption.splice(index, 0, parseFloat(hvac_consumption * avg));
    }
  }
}

  
          // Calculate savings for each month
          let expected_saving = [0.5676, 0.5676, 0.5676, 0.5423, 0.5419, 0.4852, 0.4474, 0.4240, 0.4527, 0.5676, 0.5676, 0.5676];
          let savings = [];
          for (let i = 0; i < 12; i++) {
            savings.push(expected_saving[i] * HVAC_Consumption[0]);
          }
          let total_savings = savings.reduce((acc, cur) => acc + cur, 0);
  
          // Calculate Savings based on Occupancy (consider 70% as a default)
          let occupancy = parseFloat(prompt("Enter occupancy percentage: %"));
          if (occupancy === 70) {
            total_savings = total_savings;
          } else {
            total_savings *= occupancy / 70;
          }
  
          console.log(`Total savings based on Occupancy rate: ${total_savings.toFixed(2)} €`);
  console.log("--------------------------------------------------------------");
  
  // Calculate payback period per month
  let payback_months = (investment_amount + subscription * num_rooms) / total_savings * 12;
  console.log(`Payback period: ${payback_months.toFixed(2)} months`);
  console.log("--------------------------------------------------------------");
  
  
  
  // Calculate cumulative net profit for the next 10 years
  // Calculate profit for each year
  let profit = total_savings - (investment_amount + subscription * num_rooms);
  let data = [profit];
  for (let i = 0; i < 9; i++) {
    profit += total_savings - subscription * num_rooms;
    data.push(profit);
  }
  
  
  // Display the results
  for (let i = 0; i < data.length; i++) {
  console.log(`Cumulative net profit for year ${i+1}: ${data[i].toFixed} €`);}
  
  // Display result page
  let resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML += `Total savings based on ${occupancy}% Occupancy rate: ${total_savings.toFixed(2)} €<br>`;
  resultsDiv.innerHTML += "--------------------------------------------------------------<br>";
  resultsDiv.innerHTML += `Payback period: ${payback_months.toFixed(2)} months<br>`;
  resultsDiv.innerHTML += "--------------------------------------------------------------<br>";
  
  for (let i = 0; i < data.length; i++) {
  //resultsDiv.innerHTML += `Cumulative net profit for year ${i+1}: ${data[i].toFixed(2)} €<br>`;
  }
  
  // Display the results in a table
  let table = "<table><tr><th>Year</th><th>Cumulative net profit</th></tr>";
  for (let i = 0; i < data.length; i++) {
    table += `<tr><td>${i+1}</td><td>${data[i].toFixed(2)} €</td></tr>`;
  }
  table += "</table>";
  resultsDiv.innerHTML += table;
  
  </script>
  
  </body>
  </html>  